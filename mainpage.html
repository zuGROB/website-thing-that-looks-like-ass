<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE shitass grobique's webpage</title>
    <style>
       body {
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        h1 {
            font-size: 2.5em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .button {
			font-family: 'Courier New', monospace;
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            margin: 10px 0;
        }
        .button:hover {
            background-color: #2980b9;
        }
        #imageContainer {
            margin-top: 20px;
            text-align: center;
        }
        #randomImage {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        #commentSection {
            margin-top: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .warning {
            background-color: #ffeaa7;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #comments {
            margin-top: 20px;
        }
        .comment {
            background-color: #f9f9f9;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>(wtf is html)</h1>
    
    <div>
        <a href="http://grobique.online:8000" class="button">radio, mein radio</a>
        <p>comically cursed online radio. basically my playlist</p>
        
        <a href="http://grobique.online:7860" class="button">stable diffusion</a>
        <p>regular A1111 sd..</p>
        
        <button onclick="loadRandomImage()" class="button">random pic from my folders</button>

        <div class="warning">
            <p>i do NOT take responsibility if you stumble upon titty pic. i WARNED YOU</p>
        </div>
    </div>

    <div id="imageContainer">
        <img src="" id="randomImage" alt="random">
    </div>

    <div id="commentSection">
        <h3>your honest opinios</h3>
        <div id="comments"></div>
        <textarea id="newComment" rows="2" cols="20"></textarea>
        <button onclick="addComment()" class="button">share it</button>
    </div>

    <a href="/minecraft" class="button">minecraft server???</a>

    <p>source code availabale on <a href="https://github.com/zuGROB/website-thing-that-looks-like-ass/tree/main">GitHub</a></p>

    <script>
        let currentImagePath = '';

        function loadRandomImage() {
            fetch('/random_image')
                .then(response => {
                    currentImagePath = response.headers.get('X-Image-Path');
                    return response.blob();
                })
                .then(blob => {
                    const img = document.getElementById('randomImage');
                    img.src = URL.createObjectURL(blob);
                    loadComments();
                })
                .catch(error => console.error('Error:', error));
        }

        function loadComments() {
            fetch(`/get_comments?image_path=${encodeURIComponent(currentImagePath)}`)
                .then(response => response.json())
                .then(comments => {
                    const commentsContainer = document.getElementById('comments');
                    commentsContainer.innerHTML = '';
                    comments.forEach(comment => {
                        const commentDiv = document.createElement('div');
                        commentDiv.textContent = comment;
                        commentsContainer.appendChild(commentDiv);
                    });
                })
                .catch(error => console.error('Error:', error));
        }

        function addComment() {
            const commentText = document.getElementById('newComment').value;
            if (commentText.trim() === '') return;

            fetch('/add_comment', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `image_path=${encodeURIComponent(currentImagePath)}&comment=${encodeURIComponent(commentText)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.getElementById('newComment').value = '';
                    loadComments();
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
