<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE shitass grobique's webpage</title>
    <style>
       body {
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        h1 {
            font-size: 2.5em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .button {
			font-family: 'Courier New', monospace;
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            margin: 10px 0;
        }
        .button:hover {
            background-color: #2980b9;
        }
        #imageContainer {
            margin-top: auto;
			height: 350px;
			max-height: 350px;
			text-align: center;
			margin-left: auto;
			margin-right: auto;
			background-color: #d0d0d0;
			border-radius: 5px;
		}
        #randomImage {
            max-height: 350px;
			max-width: 100%;
			margin-left: auto;
			margin-right: auto;
			margin-top: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
			opacity: 0;
			text-align: center;
			transition: opacity 0.5s ease-in-out;
        }
        #commentSection {
            margin-top: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .warning {
            background-color: #ffeaa7;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
		.reactions {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
		.reaction {
            font-size: 2em;
            cursor: pointer;
            margin: 0 10px;
            transition: transform 0.3s;
            display: flex;
            align-items: center;
        }
        .reaction:hover {
            transform: scale(1.2);
        }
        .reaction span {
            margin-left: 5px;
            font-size: 0.7em;
		}
        #comments {
            margin-top: 20px;
        }
        .comment {
            background-color: #f9f9f9;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
/* –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é */
		#menuContainer {
            display: flex;
            justify-content: center; /* –í—ã—Ä–æ–≤–Ω—è—Ç—å –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            gap: 0px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            margin-bottom: 12px;
        }
        .menu {
            position: relative;
            display: inline-block;
        }
        .menu-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }
        .menu-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .menu-content a:hover {
            background-color: #ddd;
        }
        .menu:hover .menu-content {
            display: block;
        }
    </style>
</head>
<body>
    <h1 class="animated-title">(wtf is html)</h1>
    
    <div id="menuContainer">
	<div class="menu">
        <button class="button">SERVER</button>
			<div class="menu-content">
				<a href="/minecraft">server info</a>
				<a class="button">WIP.</a>
			</div>
		</div>
        <div class="menu">
            <button class="button">radio</button>
            <div class="menu-content">
                <a href="http://grobique.online:8000/live">stream</a>
                <a href="http://grobique.online:8000">broadcast data</a>
            </div>
        </div>

        <div class="menu">
            <button class="button">contacts</button>
            <div class="menu-content">
                <a href="https://discordapp.com/users/342573175156113418">Discord</a>
                <a href="https://x.com/tsuGROB">X (Twitter)</a>
                <a href="https://youtube.com/@gardenerofthesun">YouTube</a>
                <a href="https://t.me/zugr0b">Telegram</a>
            </div>
        </div>

        <div class="menu">
            <button class="button">donate</button>
			<div class="menu-content">
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>	
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				<a href="https://boosty.to/grobique">donate</a>
				
			</div>
        </div>
    </div>
        
        <button onclick="loadRandomImage()" class="button">random pic from my folders</button>

        <div class="warning">
            <p>i do NOT take responsibility if you stumble upon titty pic. i WARNED YOU</p>
        </div>
    </div>

    <div id="imageContainer">
        <img src="" id="randomImage" alt="random">
    </div>
	<div class="reactions">
        <div class="reaction" onclick="sendReaction('üíú')">üíú <span id="heartCount">0</span></div>
        <div class="reaction" onclick="sendReaction('üíÄ')">üíÄ <span id="skullCount">0</span></div>
        <div class="reaction" onclick="sendReaction('üëç')">üëç <span id="thumbsCount">0</span></div>
    </div>
    <div id="commentSection">
        <h3>your honest opinios</h3>
        <div id="comments"></div>
        <textarea id="newComment" rows="2" cols="20"></textarea>
        <button onclick="addComment()" class="button">share it</button>
    </div>
    <p>source code availabale on <a href="https://github.com/zuGROB/website-thing-that-looks-like-ass/tree/main">GitHub</a></p>

    <script>
        let currentImagePath = '';
        function loadRandomImage() {
			const img = document.getElementById('randomImage');
			img.style.opacity = '0';
			setTimeout(() => {
				fetch('/random_image')
					.then(response => {
						currentImagePath = response.headers.get('X-Image-Path');
						return response.blob();
					})
					.then(blob => {
						img.src = URL.createObjectURL(blob);
						img.onload = () => { 
							// –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏
							img.style.opacity = '1';
						};
						loadComments();
						loadReactions();
					})
					.catch(error => console.error('Error:', error));
			}, 500);
		}

        function loadComments() {
            fetch(`/get_comments?image_path=${encodeURIComponent(currentImagePath)}`)
                .then(response => response.json())
                .then(comments => {
                    const commentsContainer = document.getElementById('comments');
                    commentsContainer.innerHTML = '';
                    comments.forEach(comment => {
                        const commentDiv = document.createElement('div');
                        commentDiv.textContent = comment;
                        commentsContainer.appendChild(commentDiv);
                    });
                })
                .catch(error => console.error('Error:', error));
        }

        function addComment() {
            const commentText = document.getElementById('newComment').value;
            if (commentText.trim() === '') return;

            fetch('/add_comment', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `image_path=${encodeURIComponent(currentImagePath)}&comment=${encodeURIComponent(commentText)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    document.getElementById('newComment').value = '';
                    loadComments();
                }
            })
            .catch(error => console.error('Error:', error));
        }
		function loadReactions() {
            fetch(`/get_reactions?image_path=${encodeURIComponent(currentImagePath)}`)
                .then(response => response.json())
                .then(reactions => {
                    document.getElementById('heartCount').textContent = reactions['üíú'] || 0;
                    document.getElementById('skullCount').textContent = reactions['üíÄ'] || 0;
                    document.getElementById('thumbsCount').textContent = reactions['üëç'] || 0;
                })
                .catch(error => console.error('Error:', error));
        }

        function sendReaction(reaction) {
            fetch('/add_reaction', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `image_path=${encodeURIComponent(currentImagePath)}&reaction=${encodeURIComponent(reaction)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    loadReactions();  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∞–∫—Ü–∏–∏
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>